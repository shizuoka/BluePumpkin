<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>View Register Event</title>
        <link rel="stylesheet" href="css/styleTable.css" type="text/css" media="screen" />

        <link href="templatemo_style.css" rel="stylesheet" type="text/css" />
        <link href="css_pirobox/white/style.css" media="screen" title="shadow" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="js/jquery.min.js"></script>
        <script type="text/javascript" src="js/piroBox.1_2.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $().piroBox({
                    my_speed: 600, //animation speed
                    bg_alpha: 0.5, //background opacity
                    radius: 4, //caption rounded corner
                    scrollImage : false, // true == image follows the page, false == image remains in the same open position
                    pirobox_next : 'piro_next', // Nav buttons -> piro_next == inside piroBox , piro_next_out == outside piroBox
                    pirobox_prev : 'piro_prev',// Nav buttons -> piro_prev == inside piroBox , piro_prev_out == outside piroBox
                    close_all : '.piro_close',// add class .piro_overlay(with comma)if you want overlay click close piroBox
                    slideShow : 'slideshow', // just delete slideshow between '' if you don't want it.
                    slideSpeed : 4 //slideshow duration in seconds(3 to 6 Recommended)
                });
            });
        </script>
    </h:head>
    <h:body>
        <div id="templatemo_body_wrapper">
            <div id="templatemo_wrapper">

                <div id="tempaltemo_header">
                    <span id="header_icon"></span>
                    <div id="header_content">
                        <div id="site_title">
                            <a href="#" target="_parent"><img src="images/templatemo_logo.png" alt="LOGO" /></a>            </div>
                        <p>This is a free CSS website layout from templatemo.com website.  Feel free to edit and apply for your websites. Duis vitae velit sed dui malesuad mollis aliquet ligula.</p>
                        <a href="#" class="detail float_r">Detail</a>
                    </div>
                </div> <!-- end of header -->

                <div id="templatemo_main_top"></div>
                <div id="templatemo_main"><span id="main_top"></span><span id="main_bottom"></span>

                    <div id="templatemo_sidebar">

                        <div id="templatemo_menu">
                            <ul>
                                <li><a href="index.xhtml" target="_parent" class="current">Home</a></li>
                                <li><a href="registerEvent.xhtml" target="_parent">Event</a></li>
                                <c:if test="#{loginBean.isLogged==true}">  
                                    <li><a href="viewRegisterEvent.xhtml" target="_parent">View Register</a></li>
                                    <li><a href="changeInfo.xhtml" target="_parent">Profile Setting</a></li>
                                </c:if>
                                <li><a href="viewStatistic.xhtml" target="_parent">View Statistic</a></li>
                                <li><a href="#" target="_parent">Our Company</a></li>
                                <li><a href="#" target="_parent">Contact Information</a></li>
                            </ul>    	
                        </div> <!-- end of templatemo_menu -->

                        <div class="sidebar_box">
                            <div class="sb_title">Client Login</div>
                            <div class="sb_content">
                                <c:if test="#{loginBean.isLogged==false}">                                                                    
                                    <div id="login_form">
                                        <h:form id="frmLogin">
                                            <p><span>User Name:</span>
                                                <h:inputText id="username" value="#{loginBean.username}" class="login_input"/>                                                     
                                            </p>
                                            <p><span>Password:</span>
                                                <h:inputSecret id="password" value="#{loginBean.password}" class="login_input"/>                                                 
                                            </p>
                                            <h:commandButton id="login_submit" action="#{loginBean.loginEmployee()}" image="images/templatemo_login.jpg"/>                                        
                                        </h:form>
                                        <c:if test="#{not empty loginBean.msg}">
                                            <h:outputText value="#{loginBean.msg}" style="color: red"/>
                                        </c:if>
                                    </div>     
                                </c:if>
                                <c:if test="#{loginBean.isLogged==true}">
                                    <h:form id="frmLogout">
                                        <div id="login_form">
                                            Hi,#{sessionScope.employee.userName.fullName}
                                            <h:commandLink value="Logout" action="#{loginBean.logOutEmployee()}"/>
                                        </div>
                                    </h:form>
                                </c:if>
                            </div>
                            <div class="sb_bottom"></div>            
                        </div>

                        <div class="sidebar_box">
                            <div class="sb_title">Latest Updates</div>
                            <div class="sb_content">

                                <div class="sb_news_box">
                                    <a href="#">Maecenas adipiscing elem sum ipsum.</a>
                                    <span>25 September 2048</span>					
                                </div>

                                <div class="sb_news_box">
                                    <a href="#">Aser ecenas adipiscing de lorem ipsum.</a>
                                    <span>18 September 2048</span>					
                                </div>

                                <a href="#"><strong>View All</strong></a>
                            </div>

                            <div class="sb_bottom"></div>  

                        </div>                        

                        <div class="cleaner"></div>
                    </div> <!-- end of sidebar -->

                    <div id="templatemo_content">
                        <c:if test="#{not empty sessionScope.employee}">                        
                            <fieldset style="text-align: left">
                                <legend><h3>View Event Request</h3></legend>
                                <div align="center">
                                    <p:dataTable id="registerTable" var="reg" value="#{registerBean.registerEventByEmployee}" widgetVar="registersTable"   
                                                 emptyMessage="No register found with given criteria" filteredValue="#{registerBean.filteredRegister}"
                                                 paginator="true" rows="5" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                                 rowsPerPageTemplate="5,10,15" sortMode="multiple"> 

                                        <f:facet name="header">  
                                            <p:outputPanel>  
                                                <h:outputText value="Search all fields:" />  
                                                <p:inputText id="globalFilter" onkeyup="registersTable.filter()" style="width:150px" />  
                                            </p:outputPanel>  
                                        </f:facet>  

                                        <p:column id="employeeNameColumn" headerText="Employee Name">  
                                            <h:outputText value="#{reg.employeeID.fullName}" />  
                                        </p:column>  

                                        <p:column id="eventNameColumn" filterBy="#{reg.eventID.eventTitle}"  
                                                  headerText="Event Name" filterMatchMode="contains" sortBy="#{reg.eventID.eventTitle}">  
                                            <h:outputText value="#{reg.eventID.eventTitle}" />  
                                        </p:column>  

                                        <p:column id="requestDateColumn" headerText="Request Date" sortBy="#{reg.registerDate}">  
                                            <h:outputText value="#{reg.registerDate}">
                                                <f:convertDateTime pattern="MM/dd/yyyy"/>
                                            </h:outputText>
                                        </p:column>  

                                        <p:column id="statusAcceptColumn" headerText="Status" sortBy="#{reg.isAccept}" rendered="#{reg.isAccept==true}">  
                                            <h:outputText value="Accepted" style="color: green"/>  
                                        </p:column>

                                        <p:column id="statusNotAcceptColumn" headerText="Status" sortBy="#{reg.isAccept}" rendered="#{reg.isAccept==false}">  
                                            <h:outputText value="Not Yet Accept" style="color: red"/>  
                                        </p:column>

                                        <p:column id="actionColumn" headerText="Action">  
                                            <h:commandButton value="Cancel" action="#{registerBean.cancelRegister(reg)}" rendered="#{reg.isAccept==false}"/>
                                        </p:column>
                                        <h:inputHidden value="#{reg.registerID}"/>
                                    </p:dataTable> 
                                    <h:panelGrid rendered="#{registerBean.check==1}">
                                        <script>
                                            alert("You canceled register successful!");
                                        </script>
                                    </h:panelGrid>
                                    <h:panelGrid rendered="#{register.check == 2}">
                                        <script>
                                            alert("Cancel Unsuccessful! Please try again.");
                                        </script>
                                    </h:panelGrid>
                                </div>
                            </fieldset>  
                        </c:if>
                        <c:if test="#{empty sessionScope.employee}">  
                            <a href="index.xhtml" style="color: blue;font-size: 18px;">You have to login to view </a>                            
                        </c:if>
                    </div>

                    <div class="cleaner"></div>    
                </div>

                <div id="templatemo_main_bottom">
                </div>

            </div> <!-- end of wrapper -->
        </div>

        <div id="templatemo_footer_wrapper">
            <div id="templatemo_footer">
                Copyright © 2013 <a href="http://fpt.aptech.edu.vn/">FPT Aptech</a> | 
                Designed by <a href="http://aptech.ac.vn:8801/" target="_parent"> Group 1 C1007L</a> |                                  
            </div>
        </div>

    </h:body>
</html>
